require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([24],{147:function(t,i,o){"use strict";var s=a(o(1)),e=a(o(148));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(e.default))},148:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=o(150),e=o.n(s),a=o(151);var c=function(t){o(149)},l=o(0)(e.a,a.a,c,"data-v-29a9da5a",null);i.default=l.exports},149:function(t,i){},150:function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0});var s,e=o(8),a=(s=e)&&s.__esModule?s:{default:s},c=o(6);i.default={computed:{collentionColor:function(){return this.isCollection?"#ff0000":"#fff"}},data:function(){return{nowScrollTop:0,isCollection:!1,table:"",scrolltop:0,navisShow:!0,isactive:!0,reprice:15,good:null,recommend:{},detail:null,phone:this.getUser()}},onLoad:function(t){var i=t.id||"",o=t.table||"";console.log("table",o),console.log("id",i);var s=this._getPid();this._getData(i,o,s)},components:{productList:a.default},methods:{_getPid:function(){try{return t.getStorageSync("user").pid}catch(t){}},getUser:function(){try{return t.getStorageSync("user").phone}catch(t){}},copykey:function(){t.setClipboardData({data:"【"+this.good.title+"】"+this.good.short_url+" 点击链接，再选择浏览器咑閞；或復·制这段描述"+this.good.tkl+"后到👉淘♂寳♀👈",success:function(){t.showToast({title:"已复制"})}})},collection:function(){var i=this;this.phone?this.isCollection?(console.log("取消收藏",this.isCollection),(0,c.deleteCollection)({phone:this.phone,num_iid:this.good.num_iid}).then(function(o){i.isCollection=0,t.showToast({title:"已取消"})})):this.isCollection||(console.log("增加收藏",this.isCollection),(0,c.addCollection)({phone:this.phone,volume:this.good.volume,quanhoujia:this.good.quanhoujia,youhuiquan:this.good.youhuiquan,zk_final_price:this.good.zk_final_price,title:this.good.title,pict_url:this.good.pict_url,num_iid:this.good.num_iid}).then(function(o){console.log("已收藏"),i.isCollection=1,t.showToast({title:"已收藏"})})):t.showToast({title:"未登录",icon:"none"})},share:function(){console.log("share"),t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:this.good.short_url,title:"我正在领取淘宝购物超级优惠券",summary:""+this.good.item_description,imageUrl:this.good.small_images[0],success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},jump:function(t){console.log(t);var i=t.slice(8);plus.runtime.openURL("taobao://"+i)},_getData:function(t,i,o){var s=this;Promise.all([(0,c.getGoodDetail)(t,i,o,this.getUser()),(0,c.getGoodsList)({page:0,type:"",screen:"",jg:""}),(0,c.getDetailImg)(t)]).then(function(t){t.length>0&&(console.log("商品详情",t),s.good=t[0].result,s.good.logo=0==s.good.user_type?"../../static/tb.png":"../../static/tm.png",s.good.smlogo=0==s.good.user_type?"tblogo":"tmlogo",s.good.yj=(s.good.youhuiquan*parseFloat(s.good.commission_rate/100)).toFixed(2),s.good.coupon_start_time=s.good.coupon_start_time.slice(0,10),s.good.coupon_end_time=s.good.coupon_end_time.slice(0,10),s.recommend=t[1].result,s.isCollection=s.good.isCollection,s.detail=s._getDetailImg(t[2].wdescContent.pages))})},_getDetailImg:function(t){for(var i="",o=/<[^>]*>|<\/[^>]*>/gm,s=t.length,e=0;e<s;e++)-1!=t[e].indexOf("<txt>")?i+="":i+="<img src='https://"+t[e].replace(o,"")+"' style='width:100%;max-width:100%' />";return i},_getGoodDetail:function(i,o){var s=this,e=(0,c.getGoodDetail)(i,o);t.showLoading({title:"加载中...",mask:!0}),e.then(function(i){t.hideLoading(),200==i.code?(s.good=i.result,console.log("sp",s.good)):t.showToast({title:"查无此商品",icon:"none"})})},_getRecommend:function(){var t=this;(0,c.getGoodsList)({page:0,type:"",screen:"",jg:""}).then(function(i){200==i.code&&(t.recommend=i.result)})},back:function(){t.navigateBack({delta:1})},_onscroll:function(t){var i=t.target||t.srcElement;this.nowScrollTop=i.scrollTop},go:function(t){t||window.event;var i=t.target||t.srcElement;i.offsetLeft<190&&i.offsetLeft>150?(this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=0,this.isactive=!0})):i.offsetLeft<240&&i.offsetLeft>190&&(console.log("2",this.scrolltop),this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=555,this.isactive=!1}))}}}}).call(i,o(2).default)},151:function(t,i,o){"use strict";var s={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return t.good?o("view",[o("view",{staticClass:"mnav-bar"},[o("view",{staticClass:"wrap"},[o("view",{staticClass:"back",attrs:{eventid:"uBl-0"},on:{click:t.back}},[o("uni-icon",{attrs:{type:"arrow-left",size:"18",color:"#fff",mpcomid:"Ndt-0"}})],1),o("view",{directives:[{name:"show",rawName:"v-show",value:t.navisShow,expression:"navisShow"}],staticClass:"nav-title"},[o("view",{class:["txt",{avtive:t.isactive}],attrs:{eventid:"vXp-1"},on:{click:t.go}},[t._v("宝贝")]),o("view",{class:["txt",{avtive:!t.isactive}],attrs:{eventid:"AhR-2"},on:{click:t.go}},[t._v("详情")])])])]),t.good?o("scroll-view",{staticClass:"detail-container",attrs:{"scroll-top":t.scrolltop,"scroll-y":""}},[t.good?o("swiper",{staticClass:"swiper-box",attrs:{circular:"","indicator-dots":"",autoplay:"","indicator-active-color":"#fff",duration:"500"}},t._l(t.good.small_images,function(t,i){return o("swiper-item",{key:i,staticClass:"item",attrs:{mpcomid:"puO-1-"+i}},[o("image",{staticClass:"swiper-img",attrs:{src:t}})])})):t._e(),t.good?o("view",{staticClass:"container"},[o("view",{staticClass:"price-container"},[o("view",{staticClass:"price-wrap"},[o("view",{staticClass:"price-one"},[o("view",{staticClass:"jh"},[t._v("券后")]),o("view",{staticClass:"price"},[t._v("￥"+t._s(t.good.quanhoujia))])]),o("view",{staticClass:"describe"},[t._v("\n\t\t\t\t\t\t预估佣金 "+t._s(t.good.yj)+" 元\n\t\t\t\t\t")])]),o("view",{staticClass:"describe"},[t._v(t._s(t.good.title))]),o("view",{staticClass:"ready-buy"},[o("view",{staticClass:"small-gray"},[t._v("原价￥"+t._s(t.good.zk_final_price))]),o("view",{staticClass:"small-gray"},[t._v(t._s(t.good.volume)+"人已购买")])])]),o("view",{staticClass:"big-title",attrs:{eventid:"0dW-3"},on:{click:t.share}},[o("view",{staticClass:"shoptitle"},[o("image",{staticClass:"logo",attrs:{mode:"aspectFit",src:t.good.logo}}),o("view",{staticClass:"title"},[t._v(t._s(t.good.title))])]),o("view",{staticClass:"share"},[o("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"b6C-2"}}),o("text",{staticClass:"small-gray"},[t._v("分享")])],1)]),o("view",{staticClass:"quan-container",attrs:{eventid:"HSF-4"},on:{click:function(i){t.jump(t.good.short_url)}}},[o("image",{staticClass:"quan-bg",attrs:{src:"../../static/bgquan.png"}}),o("view",{staticClass:"wrap"},[o("view",{staticClass:"yhq"},[o("view",{staticClass:"yhq-txt"},[t._v("优惠券")]),o("view",{staticClass:"yhq-price"},[t._v("￥"+t._s(t.good.youhuiquan))])]),o("view",{staticClass:"yhq"},[o("view",{staticClass:"data-txt"},[t._v("使用期限")]),o("view",{staticClass:"data"},[t._v(t._s(t.good.coupon_start_time)+"~"+t._s(t.good.coupon_end_time))])])]),o("view",{staticClass:"take"},[t._v(" 立即领券")])]),o("view",{staticClass:"recommend"},[o("view",{staticClass:"title"},[t._v("推荐语")]),o("view",{staticClass:"small-gray marginL"},[t._v(t._s(t.good.item_description))])]),o("view",{staticClass:"store-introduction"},[o("view",{staticClass:"item"},[o("view",{staticClass:"icons"},[o("uni-icon",{attrs:{size:"16",type:t.good.smlogo,color:"#fe1a34",mpcomid:"uQM-3"}})],1),o("view",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t"+t._s(t.good.title)+"\n\t\t\t\t\t")])]),o("view",{staticClass:"rank"},[o("view",{staticClass:"dptxt"},[t._v("店铺评分")]),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("描述4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"o5T-4"}})],1),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("服务4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"WMT-5"}})],1),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("发货4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"RGp-6"}})],1)])]),o("view",{staticClass:"line-title"},[t._v("———— 商品详情 ————")]),t.detail?o("view",[o("rich-text",{attrs:{id:"shop-detail-wrap",nodes:t.detail,mpcomid:"cd7-7"}})],1):t._e(),o("view",{staticClass:"line-title"},[t._v("———— 为您推荐 ————")]),o("product-list",{attrs:{productList:t.recommend,mpcomid:"XFC-8"}}),o("view",{staticClass:"line-title",staticStyle:{"margin-bottom":"120upx"}},[t._v("—— 到底了 ——")])],1):t._e()],1):t._e(),t.good?o("view",{staticClass:"footer-container"},[o("view",{staticClass:"back",attrs:{eventid:"igI-5"},on:{click:t.back}},[t._v("\n\t\t\t返回\n\t\t")]),o("view",{staticClass:"colle",attrs:{eventid:"JBy-6"},on:{click:t.collection}},[o("view",{staticClass:"wrap"},[o("uni-icon",{attrs:{type:"shoucang",color:t.collentionColor,mpcomid:"TgR-9"}}),o("view",{style:{color:t.collentionColor}},[t._v("收藏")])],1)]),o("view",{staticClass:"share",attrs:{eventid:"enV-7"},on:{click:t.share}},[o("view",{staticClass:"wrap"},[o("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"CBQ-10"}}),o("view",[t._v("分享")])],1)]),o("view",{staticClass:"copy",attrs:{eventid:"eEp-8"},on:{click:t.copykey}},[t._v("\n\t\t\t复制淘口令\n\t\t")]),o("view",{staticClass:"join",attrs:{eventid:"QoB-9"},on:{click:function(i){t.jump(t.good.short_url)}}},[o("view",[o("view",{staticClass:"sm-txt"},[t._v("立省￥"+t._s(t.good.youhuiquan))]),o("view",[t._v("领券购买")])])])]):t._e()],1):t._e()},staticRenderFns:[]};i.a=s}},[147]);