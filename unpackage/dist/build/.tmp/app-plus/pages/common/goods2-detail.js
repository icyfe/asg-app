(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/goods2-detail"],{"270b":function(t,o,i){"use strict";i.r(o);var e=i("bc22"),s=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(o,t,function(){return e[t]})}(a);o["default"]=s.a},"38af":function(t,o,i){},"9bb7":function(t,o,i){"use strict";i.r(o);var e=i("ea36"),s=i("270b");for(var a in s)"default"!==a&&function(t){i.d(o,t,function(){return s[t]})}(a);i("dfde");var c=i("2877"),n=Object(c["a"])(s["default"],e["a"],e["b"],!1,null,"c3fa176a",null);n.options.__file="goods2-detail.vue",o["default"]=n.exports},bc22:function(t,o,i){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=a(i("e603")),s=i("e4e4");function a(t){return t&&t.__esModule?t:{default:t}}var c={computed:{collentionColor:function(){return this.isCollection?"#ff0000":"#fff"}},data:function(){return{nowScrollTop:0,isCollection:!1,table:"",scrolltop:0,navisShow:!0,isactive:!0,reprice:15,good:null,recommend:{},detail:null,phone:this.getUser()}},onLoad:function(t){var o=t.id||"",i=t.table||"";console.log("table",i),console.log("id",o);var e=this._getPid();this._getData(o,i,e)},components:{productList:e.default},methods:{_getPid:function(){try{var o=t.getStorageSync("user");return o.pid}catch(i){}},getUser:function(){try{var o=t.getStorageSync("user");return o.phone}catch(i){}},copykey:function(){t.setClipboardData({data:"【".concat(this.good.title,"】").concat(this.good.short_url," 点击链接，再选择浏览器咑閞；或復·制这段描述").concat(this.good.tkl,"后到👉淘♂寳♀👈"),success:function(){t.showToast({title:"已复制"})}})},collection:function(){var o=this;this.phone?this.isCollection?(console.log("取消收藏",this.isCollection),(0,s.deleteCollection)({phone:this.phone,num_iid:this.good.num_iid}).then(function(i){o.isCollection=0,t.showToast({title:"已取消"})})):this.isCollection||(console.log("增加收藏",this.isCollection),(0,s.addCollection)({phone:this.phone,volume:this.good.volume,quanhoujia:this.good.quanhoujia,youhuiquan:this.good.youhuiquan,zk_final_price:this.good.zk_final_price,title:this.good.title,pict_url:this.good.pict_url,num_iid:this.good.num_iid}).then(function(i){console.log("已收藏"),o.isCollection=1,t.showToast({title:"已收藏"})})):t.showToast({title:"未登录",icon:"none"})},share:function(){console.log("share"),t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:this.good.short_url,title:"我正在领取淘宝购物超级优惠券",summary:"".concat(this.good.item_description),imageUrl:this.good.small_images[0],success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},jump:function(o){t.showToast({title:"努力开发中..",icon:"none"})},_getData:function(t,o,i){var e=this,a=Promise.all([(0,s.getGoodDetail)(t,o,i,this.getUser()),(0,s.getGoodsList)({page:0,type:"",screen:"",jg:""})]);a.then(function(t){t.length>0&&(console.log("商品详情",t),e.good=t[0].result,e.good.logo=0==e.good.user_type?"../../static/tb.png":"../../static/tm.png",e.good.smlogo=0==e.good.user_type?"tblogo":"tmlogo",e.good.yj=(e.good.youhuiquan*parseFloat(e.good.commission_rate/100)).toFixed(2),e.good.coupon_start_time=e.good.coupon_start_time.slice(0,10),e.good.coupon_end_time=e.good.coupon_end_time.slice(0,10),e.recommend=t[1].result,e.isCollection=e.good.isCollection,e.detail=e._getDetailImg(t[2].wdescContent.pages))})},_getDetailImg:function(t){for(var o="",i=/<[^>]*>|<\/[^>]*>/gm,e=t.length,s=0;s<e;s++)-1!=t[s].indexOf("<txt>")?o+="":o+="<img src='https://"+t[s].replace(i,"")+"' style='width:100%;max-width:100%' />";return o},_getGoodDetail:function(o,i){var e=this,a=(0,s.getGoodDetail)(o,i);t.showLoading({title:"加载中...",mask:!0}),a.then(function(o){t.hideLoading(),200==o.code?(e.good=o.result,console.log("sp",e.good)):t.showToast({title:"查无此商品",icon:"none"})})},_getRecommend:function(){var t=this,o=(0,s.getGoodsList)({page:0,type:"",screen:"",jg:""});o.then(function(o){200==o.code&&(t.recommend=o.result)})},back:function(){t.navigateBack({delta:1})},_onscroll:function(t){var o=t.target||t.srcElement;this.nowScrollTop=o.scrollTop},go:function(t){t||window.event;var o=t.target||t.srcElement;o.offsetLeft<190&&o.offsetLeft>150?(this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=0,this.isactive=!0})):o.offsetLeft<240&&o.offsetLeft>190&&(console.log("2",this.scrolltop),this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=555,this.isactive=!1}))}}};o.default=c}).call(this,i("649d")["default"])},dfde:function(t,o,i){"use strict";var e=i("38af"),s=i.n(e);s.a},e132:function(t,o,i){"use strict";i("95b2");var e=a(i("b0ce")),s=a(i("9bb7"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,e.default)(s.default))},ea36:function(t,o,i){"use strict";var e=function(){var t=this,o=t.$createElement,i=t._self._c||o;return t.good?i("view",[i("view",{staticClass:"mnav-bar"},[i("view",{staticClass:"wrap"},[i("view",{staticClass:"back",attrs:{eventid:"39b84060-0"},on:{click:t.back}},[i("uni-icon",{attrs:{type:"arrow-left",size:"18",color:"#fff",mpcomid:"39b84060-0"}})],1),i("view",{directives:[{name:"show",rawName:"v-show",value:t.navisShow,expression:"navisShow"}],staticClass:"nav-title"},[i("view",{class:["txt",{avtive:t.isactive}],attrs:{eventid:"39b84060-1"},on:{click:t.go}},[t._v("宝贝")]),i("view",{class:["txt",{avtive:!t.isactive}],attrs:{eventid:"39b84060-2"},on:{click:t.go}},[t._v("详情")])])])]),t.good?i("scroll-view",{staticClass:"detail-container",attrs:{"scroll-top":t.scrolltop,"scroll-y":""}},[t.good?i("swiper",{staticClass:"swiper-box",attrs:{circular:"","indicator-dots":"",autoplay:"","indicator-active-color":"#fff",duration:"500"}},t._l(t.good.small_images,function(t,o){return i("swiper-item",{key:o,staticClass:"item",attrs:{mpcomid:"39b84060-1-"+o}},[i("image",{staticClass:"swiper-img",attrs:{src:t}})])})):t._e(),t.good?i("view",{staticClass:"container"},[i("view",{staticClass:"price-container"},[i("view",{staticClass:"price-wrap"},[i("view",{staticClass:"price-one"},[i("view",{staticClass:"jh"},[t._v("价格")]),i("view",{staticClass:"price"},[t._v("￥"+t._s(t.good.quanhoujia))])])]),i("view",{staticClass:"describe"},[t._v(t._s(t.good.title))]),i("view",{staticClass:"ready-buy"},[i("view",{staticClass:"small-gray"},[t._v("原价￥"+t._s(t.good.zk_final_price))]),i("view",{staticClass:"small-gray"},[t._v(t._s(t.good.volume)+"人已购买")])])]),i("view",{staticClass:"big-title",attrs:{eventid:"39b84060-3"},on:{click:t.share}},[i("view",{staticClass:"shoptitle"},[i("image",{staticClass:"logo",attrs:{mode:"aspectFit",src:t.good.logo}}),i("view",{staticClass:"title"},[t._v(t._s(t.good.title))])]),i("view",{staticClass:"share"},[i("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"39b84060-2"}}),i("text",{staticClass:"small-gray"},[t._v("分享")])],1)]),i("view",{staticClass:"recommend"},[i("view",{staticClass:"title"},[t._v("推荐语")]),i("view",{staticClass:"small-gray marginL"},[t._v(t._s(t.good.item_description))])]),i("view",{staticClass:"store-introduction"},[i("view",{staticClass:"item"},[i("view",{staticClass:"icons"},[i("uni-icon",{attrs:{size:"16",type:t.good.smlogo,color:"#fe1a34",mpcomid:"39b84060-3"}})],1),i("view",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t"+t._s(t.good.title)+"\n\t\t\t\t\t")])]),i("view",{staticClass:"rank"},[i("view",{staticClass:"dptxt"},[t._v("店铺评分")]),i("view",{staticClass:"item"},[i("view",{staticClass:"score"},[t._v("描述4.8")]),i("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"39b84060-4"}})],1),i("view",{staticClass:"item"},[i("view",{staticClass:"score"},[t._v("服务4.8")]),i("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"39b84060-5"}})],1),i("view",{staticClass:"item"},[i("view",{staticClass:"score"},[t._v("发货4.8")]),i("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"39b84060-6"}})],1)])]),i("view",{staticClass:"line-title"},[t._v("———— 商品详情 ————")]),t.detail?i("view",[i("rich-text",{attrs:{id:"shop-detail-wrap",nodes:t.detail,mpcomid:"39b84060-7"}})],1):t._e(),i("view",{staticClass:"line-title"},[t._v("———— 为您推荐 ————")]),i("product-list",{attrs:{productList:t.recommend,mpcomid:"39b84060-8"}}),i("view",{staticClass:"line-title",staticStyle:{"margin-bottom":"120rpx"}},[t._v("—— 到底了 ——")])],1):t._e()],1):t._e(),t.good?i("view",{staticClass:"footer-container"},[i("view",{staticClass:"back",attrs:{eventid:"39b84060-4"},on:{click:t.back}},[t._v("\n\t\t\t返回\n\t\t")]),i("view",{staticClass:"colle",attrs:{eventid:"39b84060-5"},on:{click:t.collection}},[i("view",{staticClass:"wrap"},[i("uni-icon",{attrs:{type:"shoucang",color:t.collentionColor,mpcomid:"39b84060-9"}}),i("view",{style:{color:t.collentionColor}},[t._v("收藏")])],1)]),i("view",{staticClass:"share",attrs:{eventid:"39b84060-6"},on:{click:t.share}},[i("view",{staticClass:"wrap"},[i("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"39b84060-10"}}),i("view",[t._v("分享")])],1)]),i("view",{staticClass:"copy",attrs:{eventid:"39b84060-7"},on:{click:t.copykey}},[t._v("\n\t\t\t加入购物车\n\t\t")]),i("view",{staticClass:"join",attrs:{eventid:"39b84060-8"},on:{click:function(o){t.jump()}}},[t._m(0)])]):t._e()],1):t._e()},s=[function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("view",[i("view",[t._v("立即购买")])])}];i.d(o,"a",function(){return e}),i.d(o,"b",function(){return s})}},[["e132","common/runtime","common/vendor"]]]);