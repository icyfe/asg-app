(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/goods-detail"],{"26eb":function(t,e,o){"use strict";o.r(e);var i=o("f01d"),s=o("401f");for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);o("cbf6");var c=o("2877"),n=Object(c["a"])(s["default"],i["a"],i["b"],!1,null,"c3335990",null);n.options.__file="goods-detail.vue",e["default"]=n.exports},"401f":function(t,e,o){"use strict";o.r(e);var i=o("e2fb"),s=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=s.a},"60d8":function(t,e,o){},"871c":function(t,e,o){"use strict";o("95b2");var i=a(o("b0ce")),s=a(o("26eb"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},cbf6:function(t,e,o){"use strict";var i=o("60d8"),s=o.n(i);s.a},e2fb:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o("e603")),s=o("e4e4");function a(t){return t&&t.__esModule?t:{default:t}}var c={computed:{collentionColor:function(){return this.isCollection?"#ff0000":"#fff"}},data:function(){return{nowScrollTop:0,isCollection:!1,table:"",scrolltop:0,navisShow:!0,isactive:!0,reprice:15,good:null,recommend:{},detail:null,phone:this.getUser()}},onLoad:function(t){var e=t.id||"",o=t.table||"";console.log("table",o),console.log("id",e);var i=this._getPid();this._getData(e,o,i)},components:{productList:i.default},methods:{_getPid:function(){try{var e=t.getStorageSync("user");return e.pid}catch(o){}},getUser:function(){try{var e=t.getStorageSync("user");return e.phone}catch(o){}},copykey:function(){t.setClipboardData({data:"【".concat(this.good.title,"】").concat(this.good.short_url," 点击链接，再选择浏览器咑閞；或復·制这段描述").concat(this.good.tkl,"后到👉淘♂寳♀👈"),success:function(){t.showToast({title:"已复制"})}})},collection:function(){var e=this;this.phone?this.isCollection?(console.log("取消收藏",this.isCollection),(0,s.deleteCollection)({phone:this.phone,num_iid:this.good.num_iid}).then(function(o){e.isCollection=0,t.showToast({title:"已取消"})})):this.isCollection||(console.log("增加收藏",this.isCollection),(0,s.addCollection)({phone:this.phone,volume:this.good.volume,quanhoujia:this.good.quanhoujia,youhuiquan:this.good.youhuiquan,zk_final_price:this.good.zk_final_price,title:this.good.title,pict_url:this.good.pict_url,num_iid:this.good.num_iid}).then(function(o){console.log("已收藏"),e.isCollection=1,t.showToast({title:"已收藏"})})):t.showToast({title:"未登录",icon:"none"})},share:function(){console.log("share"),t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:this.good.short_url,title:"我正在领取淘宝购物超级优惠券",summary:"".concat(this.good.item_description),imageUrl:this.good.small_images[0],success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},jump:function(t){console.log(t);var e=t.slice(8);plus.runtime.openURL("taobao://".concat(e))},_getData:function(t,e,o){var i=this,a=Promise.all([(0,s.getGoodDetail)(t,e,o,this.getUser()),(0,s.getGoodsList)({page:0,type:"",screen:"",jg:""})]);a.then(function(t){t.length>0&&(console.log("商品详情",t),i.good=t[0].result,i.good.logo=0==i.good.user_type?"../../static/tb.png":"../../static/tm.png",i.good.smlogo=0==i.good.user_type?"tblogo":"tmlogo",i.good.yj=(i.good.youhuiquan*parseFloat(i.good.commission_rate/100)).toFixed(2),i.good.coupon_start_time=i.good.coupon_start_time.slice(0,10),i.good.coupon_end_time=i.good.coupon_end_time.slice(0,10),i.recommend=t[1].result,i.isCollection=i.good.isCollection,i.detail=i._getDetailImg(t[2].wdescContent.pages))})},_getDetailImg:function(t){for(var e="",o=/<[^>]*>|<\/[^>]*>/gm,i=t.length,s=0;s<i;s++)-1!=t[s].indexOf("<txt>")?e+="":e+="<img src='https://"+t[s].replace(o,"")+"' style='width:100%;max-width:100%' />";return e},_getGoodDetail:function(e,o){var i=this,a=(0,s.getGoodDetail)(e,o);t.showLoading({title:"加载中...",mask:!0}),a.then(function(e){t.hideLoading(),200==e.code?(i.good=e.result,console.log("sp",i.good)):t.showToast({title:"查无此商品",icon:"none"})})},_getRecommend:function(){var t=this,e=(0,s.getGoodsList)({page:0,type:"",screen:"",jg:""});e.then(function(e){200==e.code&&(t.recommend=e.result)})},back:function(){t.navigateBack({delta:1})},_onscroll:function(t){var e=t.target||t.srcElement;this.nowScrollTop=e.scrollTop},go:function(t){t||window.event;var e=t.target||t.srcElement;e.offsetLeft<190&&e.offsetLeft>150?(this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=0,this.isactive=!0})):e.offsetLeft<240&&e.offsetLeft>190&&(console.log("2",this.scrolltop),this.scrolltop=this.nowScrollTop,this.$nextTick(function(){this.scrolltop=555,this.isactive=!1}))}}};e.default=c}).call(this,o("649d")["default"])},f01d:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.good?o("view",[o("view",{staticClass:"mnav-bar"},[o("view",{staticClass:"wrap"},[o("view",{staticClass:"back",attrs:{eventid:"5f3eae8c-0"},on:{click:t.back}},[o("uni-icon",{attrs:{type:"arrow-left",size:"18",color:"#fff",mpcomid:"5f3eae8c-0"}})],1),o("view",{directives:[{name:"show",rawName:"v-show",value:t.navisShow,expression:"navisShow"}],staticClass:"nav-title"},[o("view",{class:["txt",{avtive:t.isactive}],attrs:{eventid:"5f3eae8c-1"},on:{click:t.go}},[t._v("宝贝")]),o("view",{class:["txt",{avtive:!t.isactive}],attrs:{eventid:"5f3eae8c-2"},on:{click:t.go}},[t._v("详情")])])])]),t.good?o("scroll-view",{staticClass:"detail-container",attrs:{"scroll-top":t.scrolltop,"scroll-y":""}},[t.good?o("swiper",{staticClass:"swiper-box",attrs:{circular:"","indicator-dots":"",autoplay:"","indicator-active-color":"#fff",duration:"500"}},t._l(t.good.small_images,function(t,e){return o("swiper-item",{key:e,staticClass:"item",attrs:{mpcomid:"5f3eae8c-1-"+e}},[o("image",{staticClass:"swiper-img",attrs:{src:t}})])})):t._e(),t.good?o("view",{staticClass:"container"},[o("view",{staticClass:"price-container"},[o("view",{staticClass:"price-wrap"},[o("view",{staticClass:"price-one"},[o("view",{staticClass:"jh"},[t._v("券后")]),o("view",{staticClass:"price"},[t._v("￥"+t._s(t.good.quanhoujia))])]),o("view",{staticClass:"describe"},[t._v("\n\t\t\t\t\t\t预估佣金 "+t._s(t.good.yj)+" 元\n\t\t\t\t\t")])]),o("view",{staticClass:"describe"},[t._v(t._s(t.good.title))]),o("view",{staticClass:"ready-buy"},[o("view",{staticClass:"small-gray"},[t._v("原价￥"+t._s(t.good.zk_final_price))]),o("view",{staticClass:"small-gray"},[t._v(t._s(t.good.volume)+"人已购买")])])]),o("view",{staticClass:"big-title",attrs:{eventid:"5f3eae8c-3"},on:{click:t.share}},[o("view",{staticClass:"shoptitle"},[o("image",{staticClass:"logo",attrs:{mode:"aspectFit",src:t.good.logo}}),o("view",{staticClass:"title"},[t._v(t._s(t.good.title))])]),o("view",{staticClass:"share"},[o("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"5f3eae8c-2"}}),o("text",{staticClass:"small-gray"},[t._v("分享")])],1)]),o("view",{staticClass:"quan-container",attrs:{eventid:"5f3eae8c-4"},on:{click:function(e){t.jump(t.good.short_url)}}},[o("image",{staticClass:"quan-bg",attrs:{src:"../../static/bgquan.png"}}),o("view",{staticClass:"wrap"},[o("view",{staticClass:"yhq"},[o("view",{staticClass:"yhq-txt"},[t._v("优惠券")]),o("view",{staticClass:"yhq-price"},[t._v("￥"+t._s(t.good.youhuiquan))])]),o("view",{staticClass:"yhq"},[o("view",{staticClass:"data-txt"},[t._v("使用期限")]),o("view",{staticClass:"data"},[t._v(t._s(t.good.coupon_start_time)+"~"+t._s(t.good.coupon_end_time))])])]),o("view",{staticClass:"take"},[t._v(" 立即领券")])]),o("view",{staticClass:"recommend"},[o("view",{staticClass:"title"},[t._v("推荐语")]),o("view",{staticClass:"small-gray marginL"},[t._v(t._s(t.good.item_description))])]),o("view",{staticClass:"store-introduction"},[o("view",{staticClass:"item"},[o("view",{staticClass:"icons"},[o("uni-icon",{attrs:{size:"16",type:t.good.smlogo,color:"#fe1a34",mpcomid:"5f3eae8c-3"}})],1),o("view",{staticClass:"txt"},[t._v("\n\t\t\t\t\t\t"+t._s(t.good.title)+"\n\t\t\t\t\t")])]),o("view",{staticClass:"rank"},[o("view",{staticClass:"dptxt"},[t._v("店铺评分")]),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("描述4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"5f3eae8c-4"}})],1),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("服务4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"5f3eae8c-5"}})],1),o("view",{staticClass:"item"},[o("view",{staticClass:"score"},[t._v("发货4.8")]),o("uni-icon",{staticClass:"micon",attrs:{type:"up-arrow",size:"16",color:"#fe5e78",mpcomid:"5f3eae8c-6"}})],1)])]),o("view",{staticClass:"line-title"},[t._v("———— 商品详情 ————")]),t.detail?o("view",[o("rich-text",{attrs:{id:"shop-detail-wrap",nodes:t.detail,mpcomid:"5f3eae8c-7"}})],1):t._e(),o("view",{staticClass:"line-title"},[t._v("———— 为您推荐 ————")]),o("product-list",{attrs:{productList:t.recommend,mpcomid:"5f3eae8c-8"}}),o("view",{staticClass:"line-title",staticStyle:{"margin-bottom":"120rpx"}},[t._v("—— 到底了 ——")])],1):t._e()],1):t._e(),t.good?o("view",{staticClass:"footer-container"},[o("view",{staticClass:"back",attrs:{eventid:"5f3eae8c-5"},on:{click:t.back}},[t._v("\n\t\t\t返回\n\t\t")]),o("view",{staticClass:"colle",attrs:{eventid:"5f3eae8c-6"},on:{click:t.collection}},[o("view",{staticClass:"wrap"},[o("uni-icon",{attrs:{type:"shoucang",color:t.collentionColor,mpcomid:"5f3eae8c-9"}}),o("view",{style:{color:t.collentionColor}},[t._v("收藏")])],1)]),o("view",{staticClass:"share",attrs:{eventid:"5f3eae8c-7"},on:{click:t.share}},[o("view",{staticClass:"wrap"},[o("uni-icon",{attrs:{type:"share",color:"#8a8a8a",mpcomid:"5f3eae8c-10"}}),o("view",[t._v("分享")])],1)]),o("view",{staticClass:"copy",attrs:{eventid:"5f3eae8c-8"},on:{click:t.copykey}},[t._v("\n\t\t\t复制淘口令\n\t\t")]),o("view",{staticClass:"join",attrs:{eventid:"5f3eae8c-9"},on:{click:function(e){t.jump(t.good.short_url)}}},[o("view",[o("view",{staticClass:"sm-txt"},[t._v("立省￥"+t._s(t.good.youhuiquan))]),o("view",[t._v("领券购买")])])])]):t._e()],1):t._e()},s=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return s})}},[["871c","common/runtime","common/vendor"]]]);