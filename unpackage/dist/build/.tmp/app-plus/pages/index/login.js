(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/login"],{"03d2":function(e,t,i){"use strict";i("c5d2");var n=o(i("b0ce")),s=o(i("f28e"));function o(e){return e&&e.__esModule?e:{default:e}}Page((0,n.default)(s.default))},"0833":function(e,t,i){},"53a0":function(e,t,i){"use strict";i.r(t);var n=i("f0df"),s=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=s.a},7360:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"nav"},[i("view",{staticClass:"back",attrs:{eventid:"28a2c356-0"},on:{tap:e.back}},[i("uni-icon",{attrs:{type:"arrow-left",size:"20",color:"#fff",mpcomid:"28a2c356-0"}})],1),i("view",{staticClass:"title"},[e._v("登录/注册")])]),i("view",{staticClass:"switch-wrap"},[i("uni-segmented-control",{attrs:{current:e.current,values:e.items,styleType:e.styleType,activeColor:e.activeColor,eventid:"28a2c356-1",mpcomid:"28a2c356-1"},on:{clickItem:e.onClickItem}})],1),i("view",{staticClass:"content"},[i("view",{directives:[{name:"show",rawName:"v-show",value:0===e.current,expression:"current === 0"}]},[i("view",{staticClass:"item"},[i("uni-icon",{attrs:{type:"shouji",color:"#ccc",size:"16",mpcomid:"28a2c356-2"}}),i("input",{staticClass:"_input",attrs:{placeholder:e.loginerror,focus:"",eventid:"28a2c356-2"},on:{blur:e.checkphone}})],1),i("view",{staticClass:"item"},[i("uni-icon",{attrs:{type:"yanzhengma",color:"#ccc",size:"16",mpcomid:"28a2c356-3"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{placeholder:"请输入验证码",eventid:"28a2c356-3"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),i("view",{staticClass:"bt",class:["bt",{disable:e.isSend}],attrs:{eventid:"28a2c356-4"},on:{click:function(t){e.send("login")}}},[e._v(e._s(e.loginyzm))])],1),i("button",{class:["login-bt",{disable:e.isabled}],attrs:{disabled:e.isabled,eventid:"28a2c356-5"},on:{tap:e.login}},[e._v("登录")])],1),i("view",{directives:[{name:"show",rawName:"v-show",value:1===e.current,expression:"current === 1"}]},[i("view",{staticClass:"item"},[i("uni-icon",{attrs:{type:"shouji",color:"#ccc",size:"16",mpcomid:"28a2c356-4"}}),i("input",{attrs:{placeholder:e.loginerror,focus:"",eventid:"28a2c356-6"},on:{blur:e.checkphone}})],1),i("view",{staticClass:"item"},[i("uni-icon",{attrs:{type:"yanzhengma",color:"#ccc",size:"16",mpcomid:"28a2c356-5"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{placeholder:"请输入验证码",eventid:"28a2c356-7"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),i("view",{staticClass:"bt",class:["bt",{disable:e.isSend}],attrs:{eventid:"28a2c356-8"},on:{click:function(t){e.send("register")}}},[e._v(e._s(e.regyzm))])],1),i("view",{staticClass:"item"},[i("uni-icon",{attrs:{type:"yqm",color:"#ccc",size:"16",mpcomid:"28a2c356-6"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.yqm,expression:"yqm"}],attrs:{placeholder:"请输入邀请码",eventid:"28a2c356-9"},domProps:{value:e.yqm},on:{input:function(t){t.target.composing||(e.yqm=t.target.value)}}})],1),i("button",{class:["login-bt",{disable:e.isabled}],attrs:{disabled:e.isabled,eventid:"28a2c356-10"},on:{tap:e.register}},[e._v("注册")])],1)])])},s=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},f0df:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("7dca")),s=i("7168");function o(e){return e&&e.__esModule?e:{default:e}}var a={data:function(){return{items:["登录","注册"],loginyzm:"发送验证码",regyzm:"发送验证码",isabled:!0,timer:null,yqm:"",code:"",current:0,activeColor:"#F9263E",styleType:"button",isSend:!0,phone:"",loginerror:"请输入手机号"}},components:{uniSegmentedControl:n.default},methods:{back:function(){e.switchTab({url:"/pages/index/index"})},register:function(){var t=this;this.code&&this.yqm?(0,s.postRegister)({phone:this.phone,yqm:this.yqm,code:this.code}).then(function(i){100!=i.code?(i.result&&(e.setStorageSync("user",i.result),e.switchTab({url:"/pages/index/user"})),t._showToast(i.msg)):t._showToast(i.msg,"none")}):this._showToast("验证码或邀请码不能为空","none")},login:function(){var t=this;this.phone&&this.code?(0,s.postLogin)(this.phone,this.code).then(function(i){console.log(t.phone,t.code),100!=i.code?i.result&&(e.setStorageSync("user",i.result),e.switchTab({url:"/pages/index/user"})):t._showToast(i.msg,"none")}):this._showToast("手机号码或验证码不能为空","none")},checkphone:function(e){return this.phone=e.detail.value,this.phone?/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)?(this.isabled=!1,void(this.isSend=!1)):(this._showToast("请输入正确的手机号码格式","none"),this.isabled=!0,void(this.isSend=!0)):(this._showToast("手机号码不能为空","none"),this.isabled=!0,void(this.isSend=!0))},send:function(e){var t=this;if(!this.isSend&&this.phone){var i=(0,s.sendcode)(this.phone,e);i.then(function(i){if(100!=i.code){t._showToast("验证码已发送"),t.isSend=!0;var n=null,s=60;n=setInterval(function(){"login"==e?t.loginyzm=--s+"S":"register"==e&&(t.regyzm=--s+"S"),0==s&&(clearInterval(n),"login"==e?t.loginyzm="发送验证码":t.regyzm="发送验证码",t.isSend=!1)},1e3)}else t._showToast(i.msg,"none")})}else this.phone||this._showToast("手机号码不能为空","none")},_showToast:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e.showToast({title:t,icon:i})},onClickItem:function(e){this.current!==e&&(this.current=e)}}};t.default=a}).call(this,i("649d")["default"])},f28e:function(e,t,i){"use strict";i.r(t);var n=i("7360"),s=i("53a0");for(var o in s)"default"!==o&&function(e){i.d(t,e,function(){return s[e]})}(o);i("ff32");var a=i("2877"),c=Object(a["a"])(s["default"],n["a"],n["b"],!1,null,"61bb80e9",null);t["default"]=c.exports},ff32:function(e,t,i){"use strict";var n=i("0833"),s=i.n(n);s.a}},[["03d2","common/runtime","common/vendor"]]]);